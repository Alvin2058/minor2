{% include "header.html" %}

{% block content %}
  <h2 style="text-align: center;">Leaderboard</h2>

  <style>
    .first {
      background-color: gold; 
      color: black; 
    }

    .second {
      background-color: silver; 
      color: black; 
    }

    .third {
      background-color: #cd7f32; /* Bronze color for the third rank */
      color: white; /* Ensure text is readable on bronze */
    }

    .table {
      width: 60%; /* Adjust width to make the table smaller */
      margin: 0 auto; /* Center the table horizontally */
      border-collapse: collapse; /* Ensure borders are collapsed */
    }

    .table th, .table td {
      border: 1px solid blue; /* Set border color to blue */
      padding: 8px; 
      text-align: left; 
    }

    .table th {
      background-color: #034f84; /* Background color for table headers */
      color: white; /* Ensure text is readable on header background */
    }

    .rank-icon {
      font-family: "Font Awesome 5 Free"; /* Ensure FontAwesome icons are used */
      font-weight: 900; /* Bold weight for solid icons */
      color: gold; /* Default color for icons */
    }

    .first .rank-icon {
      color: gold; /* Gold color for first place */
    }

    .second .rank-icon {
      color: silver; /* Silver color for second place */
    }

    .third .rank-icon {
      color: #cd7f32; /* Bronze color for third place */
    }
  </style>

  <table class="table">
    <thead>
      <tr>
        <th>Rank</th>
        <th>Username</th>
        <th>Total Questions</th>
        <th>Total Scored</th>
      </tr>
    </thead>
    <tbody>
      {% for score in top_scores %}
        <tr class="{% if forloop.first %}first{% elif forloop.counter == 2 %}second{% elif forloop.counter == 3 %}third{% endif %}">
          <td>
            {% if forloop.first %}
              <i class="rank-icon fas fa-medal"></i>
            {% elif forloop.counter == 2 %}
              <i class="rank-icon fas fa-medal"></i>
            {% elif forloop.counter == 3 %}
              <i class="rank-icon fas fa-medal"></i>
            {% else %}
              {{ forloop.counter }}
            {% endif %}
          </td>
          <td>{{ score.username }}</td>
          <td>
            {% if score.user_id == request.user.id %}
              <a href="{% url 'user_history' score.user_id %}">{{ score.total_questions }}</a>
            {% else %}
              {{ score.total_questions }}
            {% endif %}
          </td>
          <td>{{ score.total_scored }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
